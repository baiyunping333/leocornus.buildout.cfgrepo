#################################################################
#
# buildout config to build and deploy trac projects
#   on PostgreSQL Database
#   through uWSGI
#   managed by Supervisord.
#
#################################################################

[buildout]
extends = 
    cfgrepo/config/base.cfg
    cfgrepo/config/db/postgresql-build.cfg
    cfgrepo/config/db/postgresql-conf.cfg
    cfgrepo/config/uwsgi/uwsgi-build.cfg
    cfgrepo/config/python/trac-build.cfg
    cfgrepo/config/python/trac-conf.cfg
    cfgrepo/config/supervisor.cfg

# need the psycopy2: PostgreSQL Database adapter for Python
eggs +=
    psycopg2

parts =
    postgresql-build
    psycopg2
    uwsgi-egg-custom
    trac-plugins-src
    trac-wsgi-bin
    supervisor-bin

[supervisor-conf]
programs = 
    ${postgresql-conf:supervisor-program}
    ${trac-conf:supervisor-uwsgi-program}
